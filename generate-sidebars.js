const fs = require("fs");
const path = require("path");

const docsDir = path.resolve(__dirname, "docs");
const directories = fs.readdirSync(docsDir).filter((dir) => {
  const dirPath = path.join(docsDir, dir);
  return fs.statSync(dirPath).isDirectory();
});

const sidebars = {
  docs: [
    "intro",
    ...directories.map((dir) => ({
      label: dir,
      type: "category",
      link: { type: "generated-index" },
      items: [{ type: "autogenerated", dirName: dir }],
    })),
  ],
};

const outputPath = path.resolve(__dirname, "sidebars.ts");
const content = `import type { SidebarsConfig } from "@docusaurus/plugin-content-docs";

const sidebars: SidebarsConfig = ${JSON.stringify(sidebars, null, 2)};

export default sidebars;

`;

fs.writeFileSync(outputPath, content);

console.log("sidebars.ts has been generated!");
